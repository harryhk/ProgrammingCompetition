d={}
d["2"]=1
d["3"]=1
d["5"]=1
d["7"]=1
d["11"]=1
d["13"]=1
d["17"]=1
d["19"]=1
d["23"]=1
d["29"]=1
d["31"]=1
d["37"]=1
d["41"]=1
d["43"]=1
d["47"]=1
d["53"]=1
d["59"]=1
d["61"]=1
d["67"]=1
d["71"]=1
d["73"]=1
d["79"]=1
d["83"]=1
d["89"]=1
d["97"]=1
d["101"]=1
d["103"]=1
d["107"]=1
d["109"]=1
d["113"]=1
d["127"]=1
d["131"]=1
d["137"]=1
d["139"]=1
d["149"]=1
d["151"]=1
d["157"]=1
d["163"]=1
d["167"]=1
d["173"]=1
d["179"]=1
d["181"]=1
d["191"]=1
d["193"]=1
d["197"]=1
d["199"]=1
d["211"]=1
d["223"]=1
d["227"]=1
d["229"]=1
d["233"]=1
d["239"]=1
d["241"]=1
d["251"]=1
d["257"]=1
d["263"]=1
d["269"]=1
d["271"]=1
d["277"]=1
d["281"]=1
d["283"]=1
d["293"]=1
d["307"]=1
d["311"]=1
d["313"]=1
d["317"]=1
d["331"]=1
d["337"]=1
d["347"]=1
d["349"]=1
d["353"]=1
d["359"]=1
d["367"]=1
d["373"]=1
d["379"]=1
d["383"]=1
d["389"]=1
d["397"]=1
d["401"]=1
d["409"]=1
d["419"]=1
d["421"]=1
d["431"]=1
d["433"]=1
d["439"]=1
d["443"]=1
d["449"]=1
d["457"]=1
d["461"]=1
d["463"]=1
d["467"]=1
d["479"]=1
d["487"]=1
d["491"]=1
d["499"]=1
d["503"]=1
d["509"]=1
d["521"]=1
d["523"]=1
d["541"]=1
d["547"]=1
d["557"]=1
d["563"]=1
d["569"]=1
d["571"]=1
d["577"]=1
d["587"]=1
d["593"]=1
d["599"]=1
d["601"]=1
d["607"]=1
d["613"]=1
d["617"]=1
d["619"]=1
d["631"]=1
d["641"]=1
d["643"]=1
d["647"]=1
d["653"]=1
d["659"]=1
d["661"]=1
d["673"]=1
d["677"]=1
d["683"]=1
d["691"]=1
d["701"]=1
d["709"]=1
d["719"]=1
d["727"]=1
d["733"]=1
d["739"]=1
d["743"]=1
d["751"]=1
d["757"]=1
d["761"]=1
d["769"]=1
d["773"]=1
d["787"]=1
d["797"]=1
d["809"]=1
d["811"]=1
d["821"]=1
d["823"]=1
d["827"]=1
d["829"]=1
d["839"]=1
d["853"]=1
d["857"]=1
d["859"]=1
d["863"]=1
d["877"]=1
d["881"]=1
d["883"]=1
d["887"]=1
d["907"]=1
d["911"]=1
d["919"]=1
d["929"]=1
d["937"]=1
d["941"]=1
d["947"]=1
d["953"]=1
d["967"]=1
d["971"]=1
d["977"]=1
d["983"]=1
d["991"]=1
d["997"]=1
d["1009"]=1
d["1013"]=1
d["1019"]=1
d["1021"]=1
d["1031"]=1
d["1033"]=1
d["1039"]=1
d["1049"]=1
d["1051"]=1
d["1061"]=1
d["1063"]=1
d["1069"]=1
d["1087"]=1
d["1091"]=1
d["1093"]=1
d["1097"]=1
d["1103"]=1
d["1109"]=1
d["1117"]=1
d["1123"]=1
d["1129"]=1
d["1151"]=1
d["1153"]=1
d["1163"]=1
d["1171"]=1
d["1181"]=1
d["1187"]=1
d["1193"]=1
d["1201"]=1
d["1213"]=1
d["1217"]=1
d["1223"]=1
d["1229"]=1
d["1231"]=1
d["1237"]=1
d["1249"]=1
d["1259"]=1
d["1277"]=1
d["1279"]=1
d["1283"]=1
d["1289"]=1
d["1291"]=1
d["1297"]=1
d["1301"]=1
d["1303"]=1
d["1307"]=1
d["1319"]=1
d["1321"]=1
d["1327"]=1
d["1361"]=1
d["1367"]=1
d["1373"]=1
d["1381"]=1
d["1399"]=1
d["1409"]=1
d["1423"]=1
d["1427"]=1
d["1429"]=1
d["1433"]=1
d["1439"]=1
d["1447"]=1
d["1451"]=1
d["1453"]=1
d["1459"]=1
d["1471"]=1
d["1481"]=1
d["1483"]=1
d["1487"]=1
d["1489"]=1
d["1493"]=1
d["1499"]=1
d["1511"]=1

N = int(input())

for i in range(N):
    a, b = raw_input().strip().split()
    a = int(a)
    b = int(b)
    j = a
    count = 0
    while j <= b:
        
        sum1 = 0
        sum2 = 0 
        
        for jj in str(j):
            jji = int(jj)
            sum1 = sum1 + int(jji)
            sum2 = sum2 + int(jji)*int(jji)

        if d.has_key(str(sum1)) and d.has_key(str(sum2)):
            count += 1
        
        j += 1 
    print count 

